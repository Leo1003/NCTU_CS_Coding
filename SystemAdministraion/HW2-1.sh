#!/usr/bin/env sh
ls -ARl | grep -E '^[dl-][rwxSsTt-]{9}[[:space:]]+.+' | sort -g -k 5 | awk 'BEGIN {fcnt = 0; dcnt = 0; lcnt = 0; smallcnt = 0; totalsize = 0} $1~/^d.+/ {dcnt += 1} $1~/^l.+/ {lcnt += 1} $1~/^-.+/ {fcnt += 1; totalsize += $5; if (smallcnt < 7) {smallcnt += 1; print smallcnt ": " $5 " " $9}} END {print "Directory count: " dcnt; print "File count: " fcnt; print "Link count: " lcnt; print "Total size: " totalsize}'
